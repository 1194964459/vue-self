# 简略版快速Diff

## 一、算法流程解析
**头部同步**：从列表头部开始，比较并复用相同的节点，直到遇到不同节点  

**尾部同步**：从列表尾部开始，比较并复用相同的节点，直到遇到不同节点

**处理剩余节点**：
* 若旧节点已处理完，批量创建剩余的新节点
* 若新节点已处理完，批量移除剩余的旧节点

**处理中间差异部分**：
* 建立新节点的 key 到索引的映射表
* 遍历旧节点，标记可复用节点并记录映射关系
* 使用最长递增子序列算法计算最少移动次数
* 根据 LIS 结果移动或创建节点

## 二、关键优化解析
* 预处理阶段：通过头部和尾部的快速匹配，减少了需要详细比较的节点数量
* 最长递增子序列：这是 Vue 3 Diff 算法最核心的优化，通过计算 LIS，可以找到不需要移动的节点序列，从而将节点移动次数降到最低
* 映射表查找：使用 key 建立映射表，快速查找可复用节点，避免了 Vue 2 中的多次循环比较

Vue 3 的 Diff 算法在保持 O (n) 时间复杂度的同时，通过 LIS 优化进一步减少了实际 DOM 操作次数，特别是在处理列表重排场景时性能提升显著。理解这些原理有助于我们写出更符合 Vue 3 优化策略的代码，例如在使用 v-for 时合理设置 key，以及设计更高效的列表更新逻辑。